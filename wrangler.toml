name = "antiscambottool"
main = "src/index.ts"
compatibility_flags = [ "nodejs_compat" ]
compatibility_date = "2025-11-25"
send_metrics = false
preview_urls = false
workers_dev = false

services = [
  { binding = "API_SERVICE", service = "antiscamapi", entrypoint = "APILookup" },
  { binding = "REPORT", service="antiscamreport", entrypoint="ScamReportBridge"},
]

routes = [
  { pattern = "tool.scamguard.app", custom_domain = true },
]

kv_namespaces = [
  { binding="FORBID_LIST", id="fef7637f60014232bcab3794aa530db3"},
  { binding="CAN_REPORT", id="65a8b172d3014e11960367d0f4c8d480"},
  { binding="REPORT_THREAD_CHAIN", id="ccb03dbeefb34d82b56bbe44ad11a4a8" },
]

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1

[placement]
mode = "smart"

[vars]
# some logging settings
LOG_COMMAND_RUN="true"
LOG_ERRORS="true"
# time in minutes for how long we should chain forwarded messages
CHAIN_TTL="5"
# The control guild, for adding people to the reporter.
CONTROL_GUILD="1155997672667365406"
# control/moderation flag overrides
USES_BLOCKLIST="true"
# if everyone is allowed to report rather than checking KV entries
ALL_CAN_REPORT="false"
# if an user can be reported after already being banned
CAN_REPORT_BANNED="false"
# link to the support thread
SUPPORT_THREAD="https://discord.com/channels/1155997672667365406/1281338895430320218"